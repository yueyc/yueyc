2021/2/13 13:30:30  
##3.路由协议基础-IP专业之IP路由基础(3 路由协议基础-IP专业之IP路由基础)
###3.1 路由协议基础
####什么是IP路由？
**IP路由**是指导IP报文转发的路径信息。

 * Destination/Mask 目的地址/掩码
 * proto 路由协议类型
 * pref 优先级
 * metric 路由的花费
 * Nexthop 下一跳
 * Interface 路由器接口

 ![PWE3的工作过程](../image/1.png)  
####路由来源
 * 链路层协议发现的路由（Direct）
  * 开销小、配置简单、无需人工维护，只能发现本接口所属网段的路由
 * 手工配置静态路由（Static）
  * 无开销，配置简单，需人工维护，适合简单拓扑的网络。
 * 动态路由协议发现的路由（RIP、OSPF，...）
  * 开销大，配置复杂，无需人工维护，适合复杂拓扑结构的网络。
 #### 路由优先级（Preference）
 * 从优先级最高的协议获取的路由最先优先选择加入路由表中
 
#### 路由的花费（Metric）
 * 到达这条路有所指的目的的代价，通常以下因素会影响到路由的花费值。
  * 线路延迟、带宽、线路占有率、线路可信度、跳数、最大传输单元
 * 静态路由的花费值是0
 * 不同的动态路由协议选择以上的一种或者几种计算花费值，这种计算只在同一种路由协议内有比较意义。
 * 不同的路由协议之间的路由花费值没有可比性，也不存在换算关系。

#### 路由选择原则
 * 路由选择按最长匹配原则进行选择
 * 当目前网段想用，路由选择按以下两条原则进行选择：
  * 首先：协议优先级
  * 其次：路由花费值

###3.2 自治系统（AS）
由统一机构管理，使用同一组选路策略的路由器的集合。
 * 在一个自治系统中的路由器必须相互连接，运行相同的路由协议，同时分配同一个资质系统编号。
 * 不同自治系统之间的连接使用外部路由协议，例如BGP。

###3.3 寻址算法划分
|:-----:|:-----:|:-------:|
|算法类型|距离矢量算法|链路状态算法|
|代表算法：|RIP|OSPF|
|代表算法：|BGP|IS-IS|
###3.4 几种动态路由协议比较
|:----:|:----:|:-----:|:------:|:------:|
||RIP|OSPF|ISIS|BGP|
|协议类型|距离矢量|链路状态|链路状态|距离矢量|
|是否能聚合路由|否|是|是|是|
|缺省管理距离|120|110|115|20/200|
|最大跳数限制|有|无|无|无|
|是否层次化|否|是|是|是|
|收敛速度|慢|快|快|快|
|适用网络规模|小型|中型|大型|大型|